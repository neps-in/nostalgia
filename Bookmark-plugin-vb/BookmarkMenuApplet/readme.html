<html>
<head>
	<title>Bookmark Menu Applet</title>
	<link rel="stylesheet" href="../stylesheet.css">

<SCRIPT LANGUAGE="JavaScript">
<!--
    function setOpenerAsTarget() {
        document.applets["BookmarkMenuApplet"].setTarget(opener.name);
    }

    function goSearch() {
        document.fastForm.method="GET";
        document.fastForm.action="http://www.alltheweb.com/cgi-bin/search";
        document.fastForm.target="j1menutarget";
        document.fastForm.submit();
        opener.focus();
    }

    function goDictionary() {
        document.fastForm.method="POST";
        document.fastForm.action="http://www.m-w.com/cgi-bin/dictionary";
        document.fastForm.target="j1menutarget";
        document.fastForm.va.value=document.fastForm.query.value;
        document.fastForm.submit();
        opener.focus();
    }


//-->
</SCRIPT>



</head>
<body>

<h1>Bookmark Menu Applet</h1>

| <a href="#download">Download</a> 
| <a href="#java">Java</a> 
| <a href="#html">HTML & JavaScript</a> 
| <a href="#tech">Technicalities</a> 
| <a href="#ToDo">To Do</a> 
| <a href=".">all files</a>
|

<br><br><br>
<table border="2" cellspacing=0 color="black" WIDTH="82" > 
<tr><td>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 COLS=1 WIDTH="80" >
<tr><td height=20>
    <applet code="BookmarkMenuApplet.class" name="BookmarkMenuApplet" 
        height=20 width=80 MAYSCRIPT
    >
        <param name=filename  value="bookmark.html">
        <param name=target    value="j1menutarget">
    </applet>


<tr><td>
<form action="http://www.alltheweb.com/cgi-bin/search" 
		method="GET" name="fastForm" target="" onSubmit="goSearch()">
	<input type="hidden" name="va">
	<input type="text"   name="query" size="10" >
<tr><td>
	<font face="verdana,arial" size="-1">
	<a href="#" onClick="goSearch()">
	Search</a>|<a name="dictLink"
		href="#" onClick="goDictionary()" 
	>Dict</a>
	</font>
</form>
</table>
</table>
<br><br><br>

<p><b>Purpose:</b> This applet reads a bookmarks file (in Netscape format) and
displays the corresponding menu, like the one in Netscape's toolbar.

<a href="" onClick="window.open('bookmarkWindow.html','BookmarkWindow','width=80,height=40,left=0,top=0,resizeable=yes,alwaysRaised=yes'); return false;">
Click here to open a new small window with the bookmark menu applet</a>

<p><b>Author:</b> <a href="mailto:laza@cs.columbia.edu">Zoran Lazarevic</a>
<hr>

<a name="download">
<h2>Downloading</h2></a>

<ul>
<li><p>Download latest release in a
	<a href="BookmarkMenuApplet.zip">ZIP package</a>
<li><p>Sources: get the <b>zip</b> file with the latest date (YYYY-MM-DD) from the 
	<a href=".">list of all files</a>. 
<li><p>Compiled classes: download one-by-one all *.class files. 
	<a href="#notJAR">(Why shouldn't you use JAR?)</a>
</ul>

<a name="java">
<h2>Layout of Java Classes</h2></a>


<p><b>Purpose:</b> This applet reads a bookmarks file (in Netscape format) and
displays the corresponding menu, like the one in Netscape's toolbar.

<ul>
<li><p>Click here for the list of <a href=".">all files</a>

<li><p>The applet <a href="BookmarkMenuApplet.java">BookmarkMenuApplet.java</a> 
gets the parameters,
displays a button and starts the menu loader. 

<li><p><a href="MenuLoader.java">MenuLoader</a> runs in a new thread,
adding to the menu items, submenus or separators to the menu. If the
bookmark file (~64KB) is downloaded over the modem, clicking on the button
will show the menu "growing".

<li><p><a href="BookmarkParser.java">BookmarkParser</a> uses a 
<a href="TagGetter.java">TagGetter</a> to retrieve tags between
&lt;brackets&gt;, or inter-tag strings. Based on the fixed 
<a href="bookmark.html">Netscape bookmark format</a>, 
items, folders and separators are recognized. This code
is not flexible, just enough to get the job done.

<li><p><a href="TagGetter.java">TagGetter</a> reads one by one char from a
Reader. Initially I wanted to use a StreamTokenizer for getting tags.
But, like many of the early java library classes, it is quite useless, except
for parsing Java code.

</ul>

<a name="html">
<h2>Supporting HTML and JavaScript</h2></a>

<p>In order for the applet to be usefull, it can be located in a small window which can be kept in the corner of the screen. 
<a href="#" onClick="window.open('bookmarkWindow.html','BookmarkWindow','width=80,height=40,left=0,top=0,resizeable=yes,alwaysRaised=yes'); return false;">
Click here to open the new small window with the bookmark menu applet</a>

<ul>
<li><p>I could not figure out how to open a new browser window smaller than 100x100 pixels.
In order to use the window real estate, a small form is added. It allows searching 
at <a href="http://alltheweb.com">alltheweb.com</a> 
and looking up words in <a href="http://m-w.com">Miriam-Webster dictionary</a>.

<li><p>A snippet of JavaScript code in <a href="opener.html">opener.html</a> browser window opens a small bookmarks window without toolbars or menus, containing only the applet. The bookmark window will then give opener's name to the applet, so a click on a 
menu item will open the corresponding web page in the opener window. A JavaScript in the <a href="opener.html">opener</a> names itself if it is an anonymous window. 

<li><p>The bookmark window (<a href="bookmarkWindow.html">bookmarkWindow.html</a>) interacts with the applet. So the &lt;applet&gt; tag has MAYSCRIPT property.
<pre>
        &lt;applet code="BookmarkMenuApplet.class" ... MAYSCRIPT&gt;
</pre>

<li><p>The form in the bookmark window is submitted by hyperlinks instead of buttons (links take less space). JavaScript <font face=courier>onClick()</font> modifies the form to customize it to the target web site. For instance:
<pre>
    function goSearch() {
        document.fastForm.method="GET";
        document.fastForm.action="http://www.alltheweb.com/cgi-bin/search";
        document.fastForm.target=opener.name;
        document.fastForm.submit();
        opener.focus();
    }
</pre>

</ul>

<a name="tech">
<h2>Some More Technicalities</h2></a>

<ul>
<li><p>The file with bookmarks is opened and converted to a stream using
<pre>
        new InputStreamReader( 
                    new URL(getDocumentBase(), filename)
                        .openStream()
</pre>

<li><p>After adding the button to the panel, 
<a href="BookmarkMenuApplet.java">BookmarkMenuApplet</a> 
calls <font face=courier>validate()</font> to paint itself,
so it appears on
the screen quite fast (<10 sec. over 56K modem, including opening a new
window). All the other classes will start loading after the repainting.

<li><p>The browser window is opened by hitting the form button on the opener page. At first, I wanted it to be opened automatically on load, but that would be too annoying. I prefer one more click than windows popping up when someone does not expect them.

<a name="notJAR"></a>
<li><p>Classes are not JAR-ed up. The first class is small (2.5KB). It should draw the applet before any other classes are loaded, apearing fast. All other classes are loaded when needed. This will be more apealing reason once additional functionality is added, increasing size of classes.

</ul>


<a name="ToDo">
<h2>To Do</h2></a>
<ul>

<li><p>Adding new bookmarks. Suggestions on how to modify the
server-side bookmarks file (cgi-bin, perl, python) are welcome.

<li><p>Bookmark editing applet.

</ul>

<!-- New-lines added so that browser jumps to "ToDo" section from a "#ToDo" link
     Otherwise, it wouldn't jump so low because it hits the bottom of the page.	
 -->
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


</body>
